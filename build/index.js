!function(o){var e={};function t(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return o[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=o,t.c=e,t.d=function(o,e,n){t.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:n})},t.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},t.t=function(o,e){if(1&e&&(o=t(o)),8&e)return o;if(4&e&&"object"==typeof o&&o&&o.__esModule)return o;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var s in o)t.d(n,s,function(e){return o[e]}.bind(null,s));return n},t.n=function(o){var e=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(e,"a",e),e},t.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},t.p="",t(t.s=1)}([function(o,e){o.exports=require("express")},function(o,e,t){var n=t(0),s=t(2),r=(t(3),t(4)),u=n(),a=r.createServer(u);u.set("port","3000");var d=t(5);u.use(n.static(s.join(__dirname,"public"))),u.use("/mybookstore",d),a.listen("3000",(function(o){o&&console.log(o),console.log("Server listening on PORT:::3000")}))},function(o,e){o.exports=require("path")},function(o,e){o.exports=require("cookie-parser")},function(o,e){o.exports=require("http")},function(o,e,t){var n=t(0).Router(),s=t(6);const r=t(7);n.use(s.json());const{Client:u}=t(8),a=new u({connectionString:r.pgConnectionString});a.connect(),n.get("/getbooks",(function(o,e,t){a.query("SELECT * FROM all_books.book_master",(function(o,t){o?(console.log(o),e.status(400).send(o)):e.status(200).send(t.rows)}))})),n.get("/getbook/:bookId",(function(o,e){let t="SELECT * FROM all_books.book_master WHERE book_id='"+o.params.bookId+"'";a.query(t,(function(o,t){o?e.status(400).send(o.detail):e.status(200).send(t.rows)}))})),n.post("/addbook",(function(o,e,t){null!=o.body&&"object"==typeof o.body||e.status(400).send("Invalid request body");let n=[],s=[];for(key in o.body)n.push(key),s.push(o.body[key]);let r="INSERT INTO all_books.book_master("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+") VALUES ('"+s[0]+"', '"+s[1]+"', '"+s[2]+"', '"+s[3]+"', '"+s[4]+"', '"+s[5]+"');";a.query(r,(function(o,t){o?e.status(400).send(o.detail):e.status(201).send("Book added successfully")}))})),n.post("/addbooks",(function(o,e,t){null!=o.body&&Array.isArray(o.body)||e.status(400).send("Invalid Request");let n="";for(let e=0;e<o.body.length;e++)""!==n&&(n+=","),n=n+"('"+o.body[e].book_author+"','"+o.body[e].book_id+"','"+o.body[e].book_name+"','"+o.body[e].book_price+"','"+o.body[e].purchase_date+"','"+o.body[e].language+"')";let s="INSERT INTO all_books.book_master (book_author, book_id, book_name, book_price,purchase_date,language) VALUES "+n+";";a.query(s,(function(o,t){o?e.status(400).send(o.detail):e.status(201).send("Bulk Books Added successfully")}))})),n.delete("/deletebook/:bookId",(function(o,e){let t="DELETE FROM all_books.book_master WHERE book_id='"+o.params.bookId+"'";a.query(t,(function(o,t){0==t.rowCount?e.status(400).send("Book Id not present in Database"):e.status(200).send("Book deleted successfully")}))})),n.patch("/updatebook/:bookId",(function(o,e){null!=o.body&&"object"==typeof o.body||e.status(400).send("Invalid Requset");let t="";for(let e in o.body)"book_author"==e&&(t+="book_author='"+o.body[e]+"', "),"book_name"==e&&(t+="book_name='"+o.body[e]+"', "),"book_price"==e&&(t+="book_price='"+o.body[e]+"', "),"purchase_date"==e&&(t+="purchase_date='"+o.body[e]+"', "),"language"==e&&(t+="language='"+o.body[e]+"', ");t=t.substring(0,t.length-2);let n="UPDATE all_books.book_master SET "+t+" WHERE book_id='"+o.params.bookId+"'";a.query(n,(function(o,t){0==t.rowCount?e.status(400).send("Invalid book_id"):e.status(200).send("Book Updated successfully")}))})),o.exports=n},function(o,e){o.exports=require("body-parser")},function(o,e){o.exports={pgConnectionString:"postgres://postgres:admin@localhost:5432/books"}},function(o,e){o.exports=require("pg")}]);
//# sourceMappingURL=index.js.map